[2022-11-30 06:21:22.116771] Begin to replay trace trace_8.txt
[2022-11-30 06:21:22.116823] >>> [0.000] next_event: add at 0
[2022-11-30 06:21:22.116846] >>> [0.000]      node to be add: ['172.31.28.108', '172.31.20.223', '172.31.18.152', '172.31.27.216', '172.31.24.208', '172.31.30.99', '172.31.16.5', '172.31.16.100']
[2022-11-30 06:21:22.117891] >>> [0.001] nnodes: 8, message: 
[2022-11-30 06:21:22.117947]                remain nodes: ['172.31.28.108', '172.31.20.223', '172.31.18.152', '172.31.27.216', '172.31.24.208', '172.31.30.99', '172.31.16.5', '172.31.16.100']
[2022-11-30 06:21:22.117970] >>> [0.001] next_event: remove at 80000
/opt/conda/envs/varuna/bin/python -m varuna.run_varuna --batch_size 2048 --chunk_size 32 --gpus_per_node 1 --machine_list /home/ubuntu/varuna/aws/hosts/available_machines.out --profile_folder s3://spot-checkpoints/vgg19-profile --code_dir /home/ubuntu/varuna_examples/ResNet main.py data -a 'vgg19' --varuna --lr 0.001 --epochs 1000 --resume s3://spot-checkpoints/vgg19
reachable machines: ['172.31.28.108', '172.31.20.223', '172.31.18.152', '172.31.27.216', '172.31.24.208', '172.31.30.99', '172.31.16.5', '172.31.16.100']
/opt/conda/envs/varuna/bin/python -m varuna.morph_server /home/ubuntu/varuna/aws/hosts/available_machines.out /home/ubuntu/varuna/aws/hosts/varuna_current_machines 4200  > varuna_morph.out 2>varuna_morph.err &
/opt/conda/envs/varuna/bin/python -m varuna.catch_all /home/ubuntu/varuna/aws/hosts/varuna_current_machines 5000  > varuna_catch.out 2>varuna_catch.err &
ssh ubuntu@172.31.28.108 echo "/opt/conda/envs/varuna/bin/python  -u -m varuna.launcher --ngpus_per_server 1   --node_rank 0 --nservers 8 --master_addr 172.31.28.108 --batch_size 2048 --chunk_size 32 --code_dir /home/ubuntu/varuna_examples/ResNet --profile_folder s3://spot-checkpoints/vgg19-profile main.py data -a vgg19 --varuna --lr 0.001 --epochs 1000 --resume s3://spot-checkpoints/vgg19" > launch_varuna.sh;  VARUNA_MANAGER_IP=172.31.28.108 VARUNA_MORPH_PORT=4200 VARUNA_HEARTBEAT_PORT=5000 PYTHONPATH=/home/ubuntu/varuna:$PYTHONPATH  bash launch_varuna.sh
ssh ubuntu@172.31.20.223 echo "/opt/conda/envs/varuna/bin/python  -u -m varuna.launcher --ngpus_per_server 1   --node_rank 1 --nservers 8 --master_addr 172.31.28.108 --batch_size 2048 --chunk_size 32 --code_dir /home/ubuntu/varuna_examples/ResNet --profile_folder s3://spot-checkpoints/vgg19-profile main.py data -a vgg19 --varuna --lr 0.001 --epochs 1000 --resume s3://spot-checkpoints/vgg19" > launch_varuna.sh;  VARUNA_MANAGER_IP=172.31.28.108 VARUNA_MORPH_PORT=4200 VARUNA_HEARTBEAT_PORT=5000 PYTHONPATH=/home/ubuntu/varuna:$PYTHONPATH  bash launch_varuna.sh
ssh ubuntu@172.31.18.152 echo "/opt/conda/envs/varuna/bin/python  -u -m varuna.launcher --ngpus_per_server 1   --node_rank 2 --nservers 8 --master_addr 172.31.28.108 --batch_size 2048 --chunk_size 32 --code_dir /home/ubuntu/varuna_examples/ResNet --profile_folder s3://spot-checkpoints/vgg19-profile main.py data -a vgg19 --varuna --lr 0.001 --epochs 1000 --resume s3://spot-checkpoints/vgg19" > launch_varuna.sh;  VARUNA_MANAGER_IP=172.31.28.108 VARUNA_MORPH_PORT=4200 VARUNA_HEARTBEAT_PORT=5000 PYTHONPATH=/home/ubuntu/varuna:$PYTHONPATH  bash launch_varuna.sh
ssh ubuntu@172.31.27.216 echo "/opt/conda/envs/varuna/bin/python  -u -m varuna.launcher --ngpus_per_server 1   --node_rank 3 --nservers 8 --master_addr 172.31.28.108 --batch_size 2048 --chunk_size 32 --code_dir /home/ubuntu/varuna_examples/ResNet --profile_folder s3://spot-checkpoints/vgg19-profile main.py data -a vgg19 --varuna --lr 0.001 --epochs 1000 --resume s3://spot-checkpoints/vgg19" > launch_varuna.sh;  VARUNA_MANAGER_IP=172.31.28.108 VARUNA_MORPH_PORT=4200 VARUNA_HEARTBEAT_PORT=5000 PYTHONPATH=/home/ubuntu/varuna:$PYTHONPATH  bash launch_varuna.sh
ssh ubuntu@172.31.24.208 echo "/opt/conda/envs/varuna/bin/python  -u -m varuna.launcher --ngpus_per_server 1   --node_rank 4 --nservers 8 --master_addr 172.31.28.108 --batch_size 2048 --chunk_size 32 --code_dir /home/ubuntu/varuna_examples/ResNet --profile_folder s3://spot-checkpoints/vgg19-profile main.py data -a vgg19 --varuna --lr 0.001 --epochs 1000 --resume s3://spot-checkpoints/vgg19" > launch_varuna.sh;  VARUNA_MANAGER_IP=172.31.28.108 VARUNA_MORPH_PORT=4200 VARUNA_HEARTBEAT_PORT=5000 PYTHONPATH=/home/ubuntu/varuna:$PYTHONPATH  bash launch_varuna.sh
ssh ubuntu@172.31.30.99 echo "/opt/conda/envs/varuna/bin/python  -u -m varuna.launcher --ngpus_per_server 1   --node_rank 5 --nservers 8 --master_addr 172.31.28.108 --batch_size 2048 --chunk_size 32 --code_dir /home/ubuntu/varuna_examples/ResNet --profile_folder s3://spot-checkpoints/vgg19-profile main.py data -a vgg19 --varuna --lr 0.001 --epochs 1000 --resume s3://spot-checkpoints/vgg19" > launch_varuna.sh;  VARUNA_MANAGER_IP=172.31.28.108 VARUNA_MORPH_PORT=4200 VARUNA_HEARTBEAT_PORT=5000 PYTHONPATH=/home/ubuntu/varuna:$PYTHONPATH  bash launch_varuna.sh
ssh ubuntu@172.31.16.5 echo "/opt/conda/envs/varuna/bin/python  -u -m varuna.launcher --ngpus_per_server 1   --node_rank 6 --nservers 8 --master_addr 172.31.28.108 --batch_size 2048 --chunk_size 32 --code_dir /home/ubuntu/varuna_examples/ResNet --profile_folder s3://spot-checkpoints/vgg19-profile main.py data -a vgg19 --varuna --lr 0.001 --epochs 1000 --resume s3://spot-checkpoints/vgg19" > launch_varuna.sh;  VARUNA_MANAGER_IP=172.31.28.108 VARUNA_MORPH_PORT=4200 VARUNA_HEARTBEAT_PORT=5000 PYTHONPATH=/home/ubuntu/varuna:$PYTHONPATH  bash launch_varuna.sh
ssh ubuntu@172.31.16.100 echo "/opt/conda/envs/varuna/bin/python  -u -m varuna.launcher --ngpus_per_server 1   --node_rank 7 --nservers 8 --master_addr 172.31.28.108 --batch_size 2048 --chunk_size 32 --code_dir /home/ubuntu/varuna_examples/ResNet --profile_folder s3://spot-checkpoints/vgg19-profile main.py data -a vgg19 --varuna --lr 0.001 --epochs 1000 --resume s3://spot-checkpoints/vgg19" > launch_varuna.sh;  VARUNA_MANAGER_IP=172.31.28.108 VARUNA_MORPH_PORT=4200 VARUNA_HEARTBEAT_PORT=5000 PYTHONPATH=/home/ubuntu/varuna:$PYTHONPATH  bash launch_varuna.sh
[2022-11-30 06:22:12.132734] >>> [50.016]      node to be remove: ['172.31.16.5', '172.31.16.100']
[2022-11-30 06:22:12.133346] >>> [50.017] nnodes: 6, message: preempt 50.01631760597229
[2022-11-30 06:22:12.133389]                remain nodes: ['172.31.28.108', '172.31.20.223', '172.31.18.152', '172.31.27.216', '172.31.24.208', '172.31.30.99']
[2022-11-30 06:22:42.146848] >>> [80.030] Remove node 172.31.16.5, CMD: ssh -q ubuntu@172.31.16.5 bash /home/ubuntu/varuna/aws/remove_node.sh
[2022-11-30 06:22:42.148584] >>> [80.032] Remove node 172.31.16.100, CMD: ssh -q ubuntu@172.31.16.100 bash /home/ubuntu/varuna/aws/remove_node.sh
[2022-11-30 06:22:42.149908] >>> [80.033] next_event: remove at 180000
[2022-11-30 06:23:52.184748] >>> [150.068]      node to be remove: ['172.31.18.152']
[2022-11-30 06:23:52.185661] >>> [150.069] nnodes: 5, message: preempt 150.06869220733643
[2022-11-30 06:23:52.185696]                remain nodes: ['172.31.28.108', '172.31.20.223', '172.31.27.216', '172.31.24.208', '172.31.30.99']
[2022-11-30 06:24:22.131773] >>> [180.015] Remove node 172.31.18.152, CMD: ssh -q ubuntu@172.31.18.152 bash /home/ubuntu/varuna/aws/remove_node.sh
[2022-11-30 06:24:22.133404] >>> [180.017] next_event: add at 280000
[2022-11-30 06:26:02.184757] >>> [280.068]      node to be add: ['172.31.16.5', '172.31.16.100']
[2022-11-30 06:26:02.185546] >>> [280.069] nnodes: 7, message: morph
[2022-11-30 06:26:02.185600]                remain nodes: ['172.31.28.108', '172.31.20.223', '172.31.27.216', '172.31.24.208', '172.31.30.99', '172.31.16.5', '172.31.16.100']
[2022-11-30 06:26:02.185625] >>> [280.069] next_event: add at 380000
[2022-11-30 06:27:42.216729] >>> [380.100]      node to be add: ['172.31.18.152']
[2022-11-30 06:27:42.217270] >>> [380.100] nnodes: 8, message: morph
[2022-11-30 06:27:42.217298]                remain nodes: ['172.31.28.108', '172.31.20.223', '172.31.27.216', '172.31.24.208', '172.31.30.99', '172.31.16.5', '172.31.16.100', '172.31.18.152']
[2022-11-30 06:27:42.217326] >>> [380.101] next_event: remove at 500000
[2022-11-30 06:29:12.204714] >>> [470.088]      node to be remove: ['172.31.20.223']
[2022-11-30 06:29:12.205312] >>> [470.089] nnodes: 7, message: preempt 470.0883011817932
[2022-11-30 06:29:12.205346]                remain nodes: ['172.31.28.108', '172.31.27.216', '172.31.24.208', '172.31.30.99', '172.31.16.5', '172.31.16.100', '172.31.18.152']
[2022-11-30 06:29:42.141565] >>> [500.025] Remove node 172.31.20.223, CMD: ssh -q ubuntu@172.31.20.223 bash /home/ubuntu/varuna/aws/remove_node.sh
[2022-11-30 06:31:22.217394] >>> [600.101] nnodes: 7, message: preempt 600.100261926651
[2022-11-30 06:31:22.217472]           Finally kill all
kex_exchange_identification: Connection closed by remote host
kex_exchange_identification: Connection closed by remote host
ssh: connect to host 172.31.22.229 port 22: No route to host
ssh: connect to host 172.31.22.229 port 22: No route to host
ssh: connect to host 172.31.22.229 port 22: No route to host
ssh: connect to host 172.31.22.229 port 22: No route to host
ssh: connect to host 172.31.22.165 port 22: No route to host
ssh: connect to host 172.31.22.165 port 22: No route to host
ssh: connect to host 172.31.22.165 port 22: No route to host
ssh: connect to host 172.31.22.165 port 22: No route to host
ssh: connect to host 172.31.31.40 port 22: No route to host
ssh: connect to host 172.31.31.40 port 22: No route to host
ssh: connect to host 172.31.31.40 port 22: No route to host
ssh: connect to host 172.31.31.40 port 22: No route to host
ssh: connect to host 172.31.19.171 port 22: No route to host
ssh: connect to host 172.31.19.171 port 22: No route to host
ssh: connect to host 172.31.19.171 port 22: No route to host
ssh: connect to host 172.31.19.171 port 22: No route to host
ssh: connect to host 172.31.17.44 port 22: No route to host
ssh: connect to host 172.31.17.44 port 22: No route to host
ssh: connect to host 172.31.17.44 port 22: No route to host
