Parent process ID: 5742 node: 172.31.27.155
16 per stage
32 servers!
Config:
ranks: range(31, 32)
train batch size: 2048
partitions: 2
chunk_size: 32
data depth: 16
stage to rank map: 0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30;1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31;
World size is 32
/opt/conda/envs/varuna/bin/python -u main.py --rank=31 --chunk_size=32 --local_rank=0 --stage_to_rank_map=0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30;1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31; --batch-size=128 data -a resnet152 --varuna --lr 0.001 --epochs 100 --resume s3://spot-checkpoints/resnet-profile --profiling
=> creating model 'resnet152'
Files already downloaded and verified
Num cutpoints is 31
Stages to profile: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31]
factors [32, 16, 8, 4, 2, 1]
all reduce sizes [9536, 84544, 225344, 1444928, 13015104, 60192808]
STAGE 31
USED MODULES
1 764.9279832839967 1360.655963420868 148.7360030412674 42671923.2 4
2 675.3280162811279 1069.5040225982666 140.34133156140643 43081523.2 4
3 557.0560023188591 2426.85866355896 130.44799864292145 43884339.2 4
4 696.3199973106384 2344.607949256897 162.30399906635284 44687155.2 4
5 660.736009478569 1685.3333711624146 150.16799792647362 45489971.2 4
6 785.4079902172087 1238.643193244934 151.45599842071533 46784307.2 4
7 741.8879866600035 1068.8639879226685 132.73599892854693 47587123.2 4
8 835.0720107555389 1443.072001139323 151.10400319099426 48389939.2 4
9 783.018668492635 1322.6079940795898 143.11466614405316 50159411.2 4
10 796.415999531746 1269.9584007263184 149.4559980928898 50159411.2 4
11 861.7983937263489 1350.0800132751465 152.57599949836734 50306867.2 4
12 811.5199953317642 1172.23995923996 130.3146680196126 52076339.2 4
13 845.6191897392273 3232.5013478597 150.7599987089634 52277043.2 4
14 769.8432087898254 1204.360008239746 145.17120122909543 52715315.2 4
15 816.5375947952272 3219.4240093231197 146.33600041270256 53518131.2 4
16 848.0767965316771 1397.5920081138609 151.4240006605784 54497894.4 4
17 786.4320129156112 1210.4800045490265 139.89759832620618 55260569.6 4
18 839.1679972410203 1826.464056968689 148.88799935579303 56803123.2 4
19 859.391987323761 1157.2160323460896 147.3519988358021 57405235.2 4
20 850.7391929626466 1314.8288249969482 151.15520060062408 58744627.2 4
21 827.5967955589293 1472.7599918842316 148.44800159335136 58741350.4 4
22 891.9039964675903 1373.1711864471433 154.20800074934962 59275468.8 4
23 874.4959950447081 1358.0543756484988 150.70080161094666 60333875.2 4
24 907.6053301493326 1327.2255897521975 151.19199827313423 61136691.2 4
25 800.7680028676987 1200.8106708526611 144.24960017204285 62840627.2 4
26 902.5535941123962 1403.6160111427307 151.74400210380557 62840627.2 4
27 863.2319927215574 1927.0399808883667 151.7199985682964 63668838.4 4
28 893.9520001411438 1375.3535985946655 156.39039874076843 63971123.2 4
29 856.831982731819 1446.423977613449 191.16799533367157 65249075.2 4
30 805.8879971504211 1207.2960138320923 156.01066748301187 66051891.2 4
31 928.5120069980621 3945.4080263773603 152.67200022935867 66854707.2 4
32 875.7247924804686 1330.4064035415652 146.9760000705719 67657523.2 4
33 891.6991949081421 1379.5968294143677 152.42666502793628 68460339.2 4
34 893.1840062141418 2474.7838973999023 141.92000031471252 69762867.2 4
35 975.4623889923096 1401.753616333008 152.52266824245456 70065971.2 4
36 910.3360027074815 1420.8000103632608 150.26400238275525 71950131.2 4
37 830.9760093688966 1292.063981294632 144.12799775600433 73346048.0 4
38 901.529598236084 1377.5520026683807 151.96159780025482 73469337.6 4
39 892.518401145935 1379.3120086193085 151.76533659299216 73889587.2 4
40 872.1066713333131 1395.3999876976013 144.11520063877106 74498252.8 4
41 849.7151970863342 1416.879951953888 145.1679989695549 75495219.2 4
42 829.8496007919312 1196.9493230183919 145.5231994390488 75911782.4 4
43 885.5040073394777 2601.248025894165 153.58720123767853 76878438.4 4
44 902.1439909934999 1375.7546345392861 152.62079536914825 78616371.2 4
45 853.606402873993 1326.1680006980896 144.93440091609955 79064473.6 4
46 851.9679903984071 1508.1599950790405 144.59519982337955 79946752.0 4
47 915.8656001091003 4291.264057159424 157.10720121860504 80996966.4 4
pre-alr mem 12787200
All reduce times
32 [0.0, 143959.7625732422]
16 [0.0, 5174.301624298096]
8 [0.0, 15014.791488647461]
4 [0.0, 25975.866317749023]
2 [0.0, 85857.61260986328]
1 [0.0, 385381.5002441406]
Process done with return code 0
